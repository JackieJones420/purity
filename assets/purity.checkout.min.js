Purity={};Purity.eventPathHasClass=(eventPath,className)=>{return eventPath.find(function(element){if(element.classList){if(element.classList.contains(className)){return element.classList.contains(className)}}})};Purity.popwindow={ppContainer:document.createElement('div'),ppContent:document.createElement('div'),YTplayer:undefined,closeCallback:()=>{},init:function(){let ppContainer=this.ppContainer;ppContainer.id="purity-pop-window-container";ppContainer.className="w-full h-full top-0 flex j-c-center a-i-center o-f-scl hide";document.body.appendChild(ppContainer);let ppContent=this.ppContent;ppContent.id="purity-pop-window-content";ppContent.className="margin-auto w-full pos-rlt";ppContainer.appendChild(ppContent);document.addEventListener("click",function(e){if(Purity.eventPathHasClass(e.path,'purity-pop')){e.preventDefault();let element=Purity.eventPathHasClass(e.path,'purity-pop');let setting={};for(let item of element.attributes){if(item.localName.indexOf('pop-')==0){setting[item.localName.replace('pop-','')]=item.value}};Purity.popwindow.open(element.href,element.getAttribute('pop-type')?element.getAttribute('pop-type'):'content',setting)};if(e.target.id==='purity-pop-window-container'||Purity.eventPathHasClass(e.path,'purity-pop-window-close')){Purity.popwindow.close()}})},open:function(href,type='content',setting={}){var ppClose='<svg height="40" width="40" class="pos-abt pointer purity-pop-window-close"><line x1="10" y1="10" x2="30" y2="30" stroke="#333"></line><line x1="10" y1="30" x2="30" y2="10" stroke="#333"></line></svg>';let ppContainer=this.ppContainer;let ppContent=this.ppContent;if(setting.width){ppContent.style.maxWidth=setting.width}else{ppContent.style.removeProperty('max-width')};if(setting.ratio){ppContent.style.paddingTop=`${setting.ratio*100}%`}else{ppContent.style.removeProperty('padding-top')};if(type=='img'){ppContent.innerHTML=`<img src="${href}">`}else if(type=='img-cld'){ppContent.innerHTML=`<img data-src="${href}" class="cld-prepare" alt="${setting.alt}" src="${setting.placeholder}">`}else if(type=='youtube'){ppContent.innerHTML=`<div id="pop-window-video"></div>`;let videoSetting={};if(setting.autoplay){videoSetting.autoplay=setting.autoplay};if(setting.rel){videoSetting.rel=setting.rel};if(!window.YT){let tag=document.createElement('script');tag.src="https://www.youtube.com/iframe_api";let firstScriptTag=document.getElementsByTagName('script')[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag);window.onYouTubePlayerAPIReady=()=>{Purity.popwindow.YTplayer=new YT.Player('pop-window-video',{videoId:setting.ytid,playerVars:videoSetting})}}else{Purity.popwindow.YTplayer=new YT.Player('pop-window-video',{videoId:setting.ytid,playerVars:videoSetting})}}else{ppContent.innerHTML=document.getElementById(href.split('#')[1]).innerHTML};ppContent.innerHTML+=ppClose;ppContainer.classList.remove('hide');ppContainer.classList.add('animated-show');document.body.classList.add('o-f-hid');setting.openCallBack?setting.openCallBack():null;setting.closeCallBack?Purity.popwindow.closeCallBack=setting.closeCallBack:Purity.popwindow.closeCallBack=()=>{}},close:function(){let ppContainer=this.ppContainer;let ppContent=this.ppContent;ppContainer.classList.remove('animated-show');ppContainer.classList.add('animated-hide');setTimeout(function(){ppContainer.classList.remove('animated-hide');ppContainer.classList.add('hide');ppContent.innerHTML='';document.body.classList.remove('o-f-hid');Purity.popwindow.closeCallBack()},400)}};Purity.popwindow.init()
